framework:
    test: ~
    secret: test
    session:
        storage_id: session.storage.mock_file
    form: ~
    csrf_protection: false
    validation: false

services:
    _defaults:
        public: true
    AE\ConnectBundle\Salesforce\Outbound\Enqueue\OutboundProcessor:
        autowire: true
        public: true
        tags:
            - { name: 'enqueue.client.processor' }
    AE\ConnectBundle\Salesforce\Outbound\Queue\OutboundQueue:
        autowire: true
        public: true
        arguments:
            $cache: '@doctrine_cache.providers.ae_connect_metadata'
    AE\ConnectBundle\Salesforce\Inbound\Polling\PollingService:
        autowire: true
        public: true
        arguments:
            $cache: '@doctrine_cache.providers.ae_connect_polling'

doctrine:
    dbal:
        connections:
            default:
                driver: pdo_sqlite
                memory: true
                charset: UTF8
    orm:
        auto_generate_proxy_classes: '%kernel.debug%'
        entity_managers:
            default:
                naming_strategy: doctrine.orm.naming_strategy.underscore
                connection: default
                mappings:
                    default:
                        type: annotation
                        is_bundle: false
                        prefix: "AE\\ConnectBundle\\Tests\\Entity"
                        dir: "Tests/Entity"
fidry_alice_data_fixtures:
    default_purge_mode: truncate
    db_drivers:
        doctrine_orm: true

jms_serializer:
    property_naming:
        id: 'jms_serializer.identical_property_naming_strategy'

enqueue:
    transport:
        default: 'file:'
    client:
        traceable_producer: true
    async_events: false

ae_connect:
    paths: ["%kernel.project_dir%/Tests/Entity"]
    connections:
        default:
            login:
                #key: "%env(SF_CLIENT_ID)%"
                #secret: "%env(SF_CLIENT_SECRET)%"
                username: "%env(SF_USER)%"
                password: "%env(SF_PASS)%"
                url: "https://login.salesforce.com"
            objects:
                - Account
                - UserRole
            config:
                replay_start_id: !php/const AE\SalesforceRestSdk\Bayeux\Extension\ReplayExtension::REPLAY_SAVED